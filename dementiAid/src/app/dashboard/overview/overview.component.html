<div class="overview-container">
  <!-- Summary Cards -->
  <div class="cards-grid">
    <div class="card summary-card">
      <div class="card-icon people-icon">üë•</div>
      <div class="card-info">
        <h3>Registered People</h3>
        <p class="count">{{ people.length }}</p>
      </div>
    </div>
    <div class="card summary-card">
      <div class="card-icon recognition-icon">üëÅÔ∏è</div>
      <div class="card-info">
        <h3>Recognitions Today</h3>
        <p class="count">{{ detectedFaces.length }}</p>
      </div>
    </div>
    <div class="card summary-card">
      <div class="card-icon unknown-icon">‚ùì</div>
      <div class="card-info">
        <h3>Unknown Faces</h3>
        <p class="count">0</p>
      </div>
    </div>
    <div class="card summary-card">
      <div class="card-icon time-icon">üïí</div>
      <div class="card-info">
        <h3>Last Activity</h3>
        <p class="timestamp">{{ detectedFaces.length > 0 ? 'Now' : '--' }}</p>
      </div>
    </div>
  </div>

  <!-- Live Feed Section -->
  <div class="live-feed-section">
    <div class="header-with-status">
      <h2>Live Assist View</h2>
      <div class="system-status">
        <span class="status-pulse"></span>
        SYSTEM ACTIVE
      </div>
    </div>
    <div class="live-feed futuristic-hud">
      <video #video width="720" height="560" autoplay muted></video>
      <canvas #canvas width="720" height="560"></canvas>


      <!-- Sci-Fi Overlay -->
      <div class="hud-overlay">
        <div class="scanline"></div>
        <div *ngFor="let face of detectedFaces" class="hud-target" [style.left.px]="face.box.x"
          [style.top.px]="face.box.y" [style.width.px]="face.box.width" [style.height.px]="face.box.height">

          <div class="corner tl"></div>
          <div class="corner tr"></div>
          <div class="corner bl"></div>
          <div class="corner br"></div>

          <div class="target-info" [class.unknown]="face.label === 'unknown'">
            <div class="label-line"></div>
            <div class="info-content">
              <div class="id-tag">SUBJECT ID: {{ face.label | uppercase }}</div>
              <div class="relation" *ngIf="face.label !== 'unknown'">RELATION: {{ face.relationship | uppercase }}</div>
              <div class="memory-stream" *ngIf="face.label !== 'unknown'">
                <div class="stream-header">MEMORY STREAM</div>
                <div class="stream-content">{{ face.lastConversation }}</div>
              </div>
              <div class="stt-status" *ngIf="face.isTranscribing">
                <span class="recording-dot"></span> ANALYZING AUDIO...
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Detected Faces Info -->
  <div class="detected-faces-container">
    <h3 *ngIf="detectedFaces.length > 0">Currently Detected</h3>

    <div *ngFor="let face of detectedFaces" class="detected-face-card">
      <div class="face-header">
        <div class="header-main">
          <h2>{{ face.label }}</h2>
          <span class="relationship-badge">{{ face.relationship }}</span>
        </div>
        <div class="recording-indicator" *ngIf="face.isTranscribing">
          <span class="dot"></span>
          <span class="text">Listening...</span>
        </div>
      </div>


      <div class="face-details">
        <div class="detail-item">
          <span class="icon">üìÖ</span>
          <span>Visits: {{ face.visitFrequency }}</span>
        </div>

        <div class="conversation-section" *ngIf="face.lastConversation && face.label !== 'unknown'">
          <h4>üí¨ Last Conversation</h4>
          <p class="conversation-text">{{ face.lastConversation }}</p>
        </div>

        <div class="no-conversation" *ngIf="!face.lastConversation && face.label !== 'unknown'">
          <p class="muted">No previous conversations recorded</p>
        </div>
      </div>
    </div>

    <div *ngIf="detectedFaces.length === 0" class="no-detections">
      <p>üë§ No faces detected. Please look at the camera.</p>
    </div>
  </div>
</div>