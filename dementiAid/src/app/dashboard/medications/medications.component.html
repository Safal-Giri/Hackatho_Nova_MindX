<div class="medications-container">
  <div class="header">
    <div class="header-text">
      <h2>Medication Station</h2>
      <p>Manage dosage and schedules for your important medications</p>
    </div>
    <button class="add-btn" (click)="openAddModal()">
      <i>+</i> Add Medication
    </button>
  </div>

  <div class="meds-grid" *ngIf="medicines.length > 0; else noMeds">
    <div class="med-card" *ngFor="let med of medicines">
      <div class="med-info">
        <div class="med-icon-wrapper">üíä</div>
        <div class="details">
          <h3>{{ med.name }}</h3>
          <p class="dose">{{ med.dose }}</p>
          <div class="timing-badges">
            <span class="badge-freq">{{ med.schedule }}</span>
            <span class="badge-time">‚è∞ {{ med.time }}</span>
          </div>
        </div>
      </div>
      <div class="actions">
        <button class="edit-btn" (click)="openEditModal(med)">Edit</button>
        <button class="delete-btn" (click)="deleteMed(med._id || '')">Delete</button>
      </div>
    </div>
  </div>

  <ng-template #noMeds>
    <div class="empty-state">
      <p>Your medication list is currently empty.</p>
      <button class="add-btn" (click)="openAddModal()">Add Your First Medication</button>
    </div>
  </ng-template>

  <!-- Modal -->
  <div class="modal-overlay" *ngIf="showAddModal">
    <div class="modal-box large">
      <button class="modal-close" (click)="closeAddModal()">&times;</button>
      <h2 class="modal-title">{{ isEditing ? 'Update Schedule' : 'New Medication' }}</h2>

      <form (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>Medicine Name</label>
          <input type="text" [(ngModel)]="newMed.name" name="name" required placeholder="Medicine Name">
        </div>

        <div class="form-group">
          <label>Dose</label>
          <input type="text" [(ngModel)]="newMed.dose" name="dose" required placeholder="e.g. 5mg Capsule">
        </div>

        <div class="form-group">
          <label>Frequency</label>
          <select [(ngModel)]="newMed.schedule" name="schedule">
            <option value="Daily">Daily</option>
            <option value="Weekly">Weekly</option>
            <option value="Morning">Morning</option>
            <option value="Evening">Evening</option>
          </select>
        </div>
        <div class="form-group">
          <label>Time</label>
          <input type="time" [(ngModel)]="newMed.time" name="time" required>
        </div>

        <button type="submit" class="submit-btn">{{ isEditing ? 'Save Changes' : 'Confirm Schedule' }}</button>
      </form>
    </div>
  </div>
</div>